<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login Page</title>
    <link rel="stylesheet" href="login.css">
    <link rel="stylesheet" href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css">
</head>
<body>

        <div class="login-container">
            <div class="login-form">
                <h1>EasyGo - AMS</h1>
                <div class="form-group">
                    <label for="Input">User Id</label>
                    <i class="bx bxs-user icon"></i>
                    <input class="UserId-bxs-user" id="userId" type="text" placeholder="User ID">
                </div>
                <div class="form-group">
                    <label for="password">Password</label>
                    <i class="bx bxs-lock icon"></i>
                    <input type="password" id="pwd" placeholder="Password">
                </div>
                <button id="login-btn">Login</button>
                <div id="error">

                </div>
                <div class="register">
    
                    <p>New User? <a href="register.html">
                        <b>
                            Register Yourself</a>
                        </b>
                    </p>
                </div>
            </div>
        </div>
        <script>
            document.getElementById('login-btn').addEventListener('click',
            
            function(){
                const userId = document.getElementById('userId').value;
                const pwd = document.getElementById('pwd').value;
                const error = document.getElementById('error');

                const users =  {
                    "1234": "user123",
                    "1111": "user111",
                    "2222": "user222",
                }

                const userData = JSON.parse(localStorage.getItem(userId));

                error.innerHTML = '';

                if(!userId || !pwd){
                    console.log("error");
                    error.innerHTML = "Both fields are required!";
                }

                else if(!/^\d{1,5}$/.test(userId)){
                    error.innerHTML = "Id not valid";
                }

                else if(pwd.length<6||pwd.length>30){
                    error.innerHTML = `<p>Password not valid</p>`
                }

                else if(users[userId]){
                    if(users[userId]===pwd){
                        window.location.href = 'home.html';
                    }
                    else{
                        error.innerHTML = `<p>Password Not Valid</p>`;
                    }
                }
                else if(userData){
                    if(userData.password){
                        alert('Login Successful!');
                        localStorage.setItem('loggedInUser',userId);
                        window.location.href = 'home.html';
                    }
                }
                else{
                    error.innerHTML = `<p>User not valid</p>`;
                }
            }
            
            )
        </script>
</body>
</html>

